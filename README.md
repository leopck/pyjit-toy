# PyJIT: Advanced Compiler Techniques in Python

This repository contains two Python modules demonstrating advanced compiler techniques, including Abstract Syntax Tree (AST) transformation, Intermediate Representation (IR) optimization, LLVM IR generation, and pseudo-assembly code generation. These techniques are foundational for understanding compilers, interpreters, and code optimization processes.

## Modules Description

- `ASTToIRTransformer`: Converts Python functions into an Intermediate Representation (IR) using Python's Abstract Syntax Tree (AST). It demonstrates how high-level language constructs can be translated into a lower-level, more abstract form suitable for further processing or optimization.
- `LLVMIRGenerator`: Takes the IR generated by `ASTToIRTransformer` and performs two tasks:
  1. Optimizes the IR to remove redundant operations.
  2. Generates LLVM IR and pseudo-assembly code from the optimized IR, showcasing two paths of code generation: for a virtual machine (via LLVM) and for a hypothetical machine (as pseudo-assembly).

## Installation

Ensure you have Python 3.6 or newer installed. This project also requires the `llvmlite` package for LLVM IR generation:

```bash
pip install -r requirements.txt
```

## Usage

1. **AST to IR Transformation**:
   To transform a Python function into IR, use the `ASTToIRTransformer` class from `ast_to_ir.py`. Example usage:

   ```python
   import ast
   from llvm_jit import ASTToIRTransformer

   source_code = """
   def add_multiply(x, y):
       return (x + y) * (x - y)
   """
   tree = ast.parse(source_code)
   transformer = ASTToIRTransformer()
   ir = transformer.generate_ir(tree)
   print(ir)
   ```

2. **IR Optimization and Code Generation**:
   To optimize the IR and generate LLVM IR or pseudo-assembly, use the `IROptimizer` and `LLVMIRGenerator` or `MachineCodeGenerator` classes from `ir_to_llvm_and_assembly.py`. Example for LLVM IR generation:

   ```python
   from llvm_jit import IROptimizer, LLVMIRGenerator

   # Assuming `ir` is the intermediate representation generated previously
   optimizer = IROptimizer(ir)
   optimizer.optimize()
   optimized_ir = optimizer.get_optimized_ir()

   llvm_generator = LLVMIRGenerator(optimized_ir)
   llvm_ir = llvm_generator.generate_llvm_ir()
   print(llvm_ir)
   ```

   For pseudo-assembly code generation, replace `LLVMIRGenerator` with `MachineCodeGenerator` and follow a similar pattern.

## Contributing

Contributions to improve or extend the functionality are welcome. Please follow standard GitHub contribution guidelines, including fork, clone, feature branch creation, commit, push, and pull request processes.

## License

This project is open-sourced under the MIT License. See the LICENSE file for more details.
